name: PR Scan with Findings
on:
  pull_request:
jobs:
  scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - run: pip install -U pip
      - run: pip install -e .
      - name: Run SS360 PR scan
        run: python scripts/ci_scan.py --format json --output findings.json .
      - name: Upload findings
        uses: actions/upload-artifact@v4
        with:
          name: findings
          path: findings.json
